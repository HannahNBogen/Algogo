version '1.0'

apply plugin: 'java'
sourceCompatibility = 1.8

apply plugin: 'antlr'

dependencies {
    configurations.compile.extendsFrom(configurations.extraLibs)
    extraLibs fileTree(dir: 'libs', include: ['*.jar'])

    testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.2.0'

    antlr group: 'org.antlr', name: 'antlr4', version: '4.7.1'

    extraLibs group: 'org.antlr', name: 'antlr4-runtime', version: '4.7.1'
    extraLibs group: 'ch.obermuhlner', name: 'big-math', version: '2.0.0'
}

generateGrammarSource {
    arguments += ['-visitor', '-long-messages']
}

jar {
    from {
        configurations.extraLibs.collect { it.isDirectory() ? it : zipTree(it) }
    }
}